<div section='main'>
  <div section='add-new-server'>
    <div class='card'>
      <div class='card-header'>
        Add new server
      </div>
      <div class='card-body'>
        <%= simple_form_for @port, url: ports_path do |f| %>
          <%= f.input :name, :collection => @connected_devices %>
          <%= f.input :rate, collection: @rates %>
          <%= f.button :submit, class: 'btn btn-primary' %>
        <% end %>
      </div>
    </div>
  </div>

  <div section='start-stop-server' class='mt-4'>
    <div class='card'>
      <div class='card-header'>
        Start servers
      </div>
      <div class='card-body'>
        <%= link_to "Start polling", start_polling_path, data: { turbo_method: :post }, class: "btn btn-primary" %>
        <%= link_to "STOP", stop_polling_path, data: {turbo_method: :post }, class: "btn btn-danger"%>
      </div>
    </div>
  </div>

  <% if @servers.any? %>
    <div section='server-table' class='mt-4'>
      <table class='table table-striped table-hover mt-4'>
        <thead class='thead'>
          <tr>
            <th><%= Server.human_attribute_name(:name) %></th>
            <th><%= Port.human_attribute_name(:port) %></th>
            <th><%= Port.human_attribute_name(:rate) %></th>
          </tr>
        </thead>
        <tbody>
          <% @servers.each do |server| %>
            <tr>
              <td><%= server.name %></td>
              <td><%= server.port.name %></td>
              <td><%= server.port.rate %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% end %>
</div>
